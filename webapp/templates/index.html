<!doctype html>
<html lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-33349132-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-33349132-2');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Coronavirus Live Advanced Statistics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />
    <meta name="description" content="COVID-19 Outbreak Cases, Statistics, Your Country and Worldwide">
    <meta name="msapplication-tap-highlight" content="no">
{% load static %}
<link href="{% static 'main.css' %}" rel="stylesheet">
<!-- Hotjar Tracking Code for covidstatus.live -->
<script src="https://kit.fontawesome.com/398cc3c757.js" crossorigin="anonymous"></script>
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:1729840,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
</head>
<body>
    <div class="app-container app-theme-white body-tabs-shadow fixed-sidebar fixed-header">
        <div class="">
            <div class="col-lg-12">

                    <br>

                    <!-- <div class="mb-3 card text-white card-body bg-danger">
                        <h5 class="text-white card-title"><i class="fas fa-exclamation-circle"></i> Be responsible <i class="fas fa-exclamation-circle"></i></h5>
                        <h6>Please <b>STAY HOME</b> as much as possible. Don't go out for random walks, don't meet friends face-to-face, protect the elders and buy responsibly. The only way to stop spreading this virus is by showing unity. Always inform yourself of trusted and <a href="https://www.who.int/emergencies/diseases/novel-coronavirus-2019/advice-for-public" target="_blank" class="text-white"><u>official sources.</u></a></h6>
                    </div> -->

                    <div class="main-card mb-3">
                        <h1>{{ my_country_data.country_name }} Corona Virus Live Status</h1>
                    </div>

                {% load humanize %}

                    <div class="main-card mb-2 card">
                        <div class="no-gutters row">
                            <div class="col-md-2">
                                <div class="widget-content">
                                    <div class="widget-content-wrapper">
                                        <div class="widget-content-right ml-0 mr-3">
                                            <div class="widget-numbers text-warning" style="font-size: 2.5rem">{{ my_country_data.cases|intcomma }}</div>
                                        </div>
                                        <div class="widget-content-left">
                                            <div class="widget-heading">Total Cases</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="widget-content">
                                    <div class="widget-content-wrapper">
                                        <div class="widget-content-right ml-0 mr-3">
                                            <div class="widget-numbers text-primary" style="font-size: 2.5rem">
                                                {% if my_country_data.new_cases == 0 %}
                                                    0
                                                {% else %}
                                                    +{{ my_country_data.new_cases|intcomma }}
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="widget-content-left">
                                            <div class="widget-heading">New Cases Today</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="widget-content">
                                    <div class="widget-content-wrapper">
                                        <div class="widget-content-right ml-0 mr-3">
                                            <div class="widget-numbers text-danger" style="font-size: 2.5rem">
                                                {% if my_country_data.new_deaths == 0 %}
                                                    0
                                                {% else %}
                                                    +{{ my_country_data.new_deaths }}
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="widget-content-left">
                                            <div class="widget-heading">New Deaths Today</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="widget-content">
                                    <div class="widget-content-wrapper">
                                        <div class="widget-content-right ml-0 mr-3">
                                            <div class="widget-numbers text-danger" style="font-size: 2.5rem">{{ my_country_data.deaths|intcomma }}</div>
                                        </div>
                                        <div class="widget-content-left">
                                            <div class="widget-heading">Total Deaths</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="widget-content">
                                    <div class="widget-content-wrapper">
                                        <div class="widget-content-right ml-0 mr-3">
                                            <div class="widget-numbers text-danger" style="font-size: 2.5rem">{{ my_country_data.death_rate }}</div>
                                        </div>
                                        <div class="widget-content-left">
                                            <div class="widget-heading">Mortality Rate</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="widget-content">
                                    <div class="widget-content-wrapper">
                                        <div class="widget-content-right ml-0 mr-3">
                                            <link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet"><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/A2ufJb8"><img src="https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg" alt=""><span style="margin-left:15px;font-size:19px !important;">Buy me a coffee!</span></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h6 class="text-muted">Last update: {{ datetime }} UTC +0</h6>

                    <div class="divider mt-0" style="margin-bottom: 30px;"></div>

                    <h1>Worldwide Status</h1>

                    <div class="row">

                    <div class="col-lg-4">
                        <div class="row">
                        <div class="col-md-12 col-xl-12">
                            <div class="card mb-3 widget-content bg-premium-dark">
                                <div class="widget-content-wrapper text-white">
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Total Cases</div>
{#                                        <div class="widget-subheading">Total revenue streams</div>#}
                                    </div>
                                    <div class="widget-content-right">
                                        <div class="widget-numbers text-warning"><span>{{ global_data.cases|intcomma }}</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-xl-12">
                            <div class="card mb-3 widget-content bg-premium-dark">
                                <div class="widget-content-wrapper text-white">
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Recovered</div>
{#                                        <div class="widget-subheading">Total revenue streams</div>#}
                                    </div>
                                    <div class="widget-content-right">
                                        <div class="widget-numbers text-success"><span>{{ global_data.recovered|intcomma }}</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-xl-12">
                            <div class="card mb-3 widget-content bg-premium-dark">
                                <div class="widget-content-wrapper text-white">
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Deaths</div>
{#                                        <div class="widget-subheading">Total revenue streams</div>#}
                                    </div>
                                    <div class="widget-content-right">
                                        <div class="widget-numbers text-danger"><span>{{ global_data.deaths|intcomma }}</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-xl-12">
                            <div class="card mb-3 widget-content bg-premium-dark">
                                <div class="widget-content-wrapper text-white">
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Get updates from our blog</div>
{#                                        <div class="widget-subheading">Total revenue streams</div>#}
                                    </div>
                                    <div class="widget-content-right">
                                        <button class="btn btn-primary" onclick="window.location.href='/blog'">
                                                    READ NOW!
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 col-xl-12">
                            <div class="main-card mb-3 card">
                                <div class="card-body">
                                    <h5 class="card-title">Case Distribution</h5>
                                    <canvas id="global_distribution"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>

                    <div class="col-lg-8">
                        <div id="chartdiv"></div>
                    </div>

                        <div class="col-md-12 col-xl-12">
                            <div class="main-card mb-3 card">
                                <div class="card-body">

                                    <h4 class="text-primary"><i class="fas fa-stethoscope"></i> Please take your time and share your positive thoughts about our beloved doctors and health personnel. We will make sure that your support reaches them somehow.</h4>

                                    <br>

                                    <div class="row">
                                        <div class="col-lg-6 col-md-12">
                                            <ul class="newsticker">
                                                {% for message in messages %}
                                                    <li>
                                                        {{ message.message }}
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                        <div class="col-lg-6 col-md-12">
                                            <form method="post" action="message/">{% csrf_token %}
                                                <div class="row">
                                                    <div class="col-lg-10">
                                                        <input name="message" id="message" placeholder="Your support message for a doctor" type="text" class="form-control">
                                                    </div>
                                                    <div class="col-lg-2">
                                                        <button class="btn btn-primary">Submit</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>



{#                <div class="divider mt-0" style="margin-bottom: 30px;"></div>#}

                    <form class="form-inline">
                        <div class="position-relative form-group">
                            <input id="tabel_search" class="mr-2 form-control" placeholder="Search country">
                        </div>
                    </form>

                    <br>


                        <div class="main-card mb-3 card">
                            <div class="card-body"><h5 class="card-title">Worldwide</h5>
                                <div class="table-responsive table-hover" id="world_table">
                                    <table class="mb-0 table">
                                        <thead>
                                        <tr>
                                            <th>Country</th>
                                            <th>Total Cases</th>
                                            <th>New Cases</th>
                                            <th>New Deaths</th>
                                            <th>Mortality Rate</th>
                                            <th>Total Deaths</th>
                                            <th>Total Recovered</th>
                                            <th>Active Cases</th>
                                            <th>Critical Cases</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for name, data in countires.items %}
                                        <tr>
                                            <th scope="row">{{ data.country_name }}</th>
                                            <td><div class="mb-2 mr-2 badge badge-pill badge-dark">{{ data.total_cases|intcomma }}</div></td>
                                            <td><div class="mb-2 mr-2 badge badge-pill badge-primary">{{ data.new_cases|intcomma }}</div></td>
                                            <td><div class="mb-2 mr-2 badge badge-pill badge-danger">{{ data.new_deaths }}</div></td>
                                            <td><div class="mb-2 mr-2 badge badge-pill badge-danger">{{ data.death_rate|intcomma }}%</div></td>
                                            <td><div class="mb-2 mr-2 badge badge-pill badge-danger">{{ data.total_deaths|intcomma }}</div></td>
                                            <td><div class="mb-2 mr-2 badge badge-pill badge-success">{{ data.total_recovered|intcomma }}</div></td>
                                            <td><div class="mb-2 mr-2 badge badge-pill badge-warning">{{ data.critical|intcomma }}</div></td>
                                            <td><div class="mb-2 mr-2 badge badge-pill badge-danger">{{ data.active_cases|intcomma }}</div></td>
                                        </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
            </div>
                <script src="https://www.amcharts.com/lib/4/core.js"></script>
                <script src="https://www.amcharts.com/lib/4/maps.js"></script>
                <script src="https://www.amcharts.com/lib/4/geodata/worldLow.js"></script>
                <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
        </div>
    </div>
{#<script type="text/javascript" src="{% static 'assets/scripts/main.js' %}"></script>#}
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
<script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="{% static 'assets/scripts/jquery.newsTicker.js' %}"></script>
<script>
    setTimeout(function() {
        location.reload();
    }, 1200000);
</script>
<script>
    var ctx = document.getElementById('global_distribution').getContext('2d');
    var myPieChart = new Chart(ctx, {
        type: 'pie',
        data: {
            datasets: [{
                data: [{{ global_data.active }}, {{ global_data.recovered }}, {{ global_data.deaths }}],
                backgroundColor: [
                    '#f7b924',
                    '#3ac47d',
                    '#d92550'
                ]
            }],

            // These labels appear in the legend and in the tooltips when hovering different arcs
            labels: [
                'Active Cases',
                'Recovered',
                'Deaths'
            ],
        },
        options: {
            cutoutPercentage: 0,
            animation: {
                duration: 0 // general animation time
            },
        }
    });
</script>

<script>
    // Themes begin
    am4core.useTheme(am4themes_animated);
    // Themes end

    // Create map instance
    var chart = am4core.create("chartdiv", am4maps.MapChart);

    // Set map definition
    chart.geodata = am4geodata_worldLow;

    // Set projection
    chart.projection = new am4maps.projections.Miller();

    chart.tapToActivate = true;

    // Create map polygon series
    var polygonSeries = chart.series.push(new am4maps.MapPolygonSeries());

    // Exclude Antartica
    polygonSeries.exclude = ["AQ"];

    // Make map load polygon (like country names) data from GeoJSON
    polygonSeries.useGeodata = true;

    // Configure series
    var polygonTemplate = polygonSeries.mapPolygons.template;
    polygonTemplate.tooltipText = "{name}\nCases: {cases}";
    polygonTemplate.polygon.fillOpacity = 0.6;

    polygonSeries.heatRules.push({
        "property": "fill",
        "target": polygonSeries.mapPolygons.template,
        "min": am4core.color("#e2e4e4"),
        "max": am4core.color("#aa002b"),
        "maxValue": 793,
        "minValue": 0,
    });

    polygonSeries.data = [
        {% for name, data in countires.items %}
            {% if data.total_cases_by_population != None %}
                {
                    "id": "{{ name }}",
                    "value": {{ data.total_cases_by_population }},
                    "cases": {{ data.total_cases }},
                },
            {% endif %}
        {% endfor %}
    ];

    polygonTemplate.propertyFields.fill = "fill";


    // Create hover state and set alternative fill color
    var hs = polygonTemplate.states.create("hover");
    hs.properties.fill = chart.colors.getIndex(0);

    // Add image series
    var imageSeries = chart.series.push(new am4maps.MapImageSeries());
    imageSeries.mapImages.template.propertyFields.longitude = "longitude";
    imageSeries.mapImages.template.propertyFields.latitude = "latitude";
    imageSeries.mapImages.template.tooltipText = "{title}";
    imageSeries.mapImages.template.propertyFields.url = "url";

    var circle = imageSeries.mapImages.template.createChild(am4core.Circle);
    circle.radius = 3;
    circle.propertyFields.fill = "color";

    var circle2 = imageSeries.mapImages.template.createChild(am4core.Circle);
    circle2.radius = 3;
    circle2.propertyFields.fill = "color";


    circle2.events.on("inited", function(event){
      {#animateBullet(event.target);#}
    })


    function animateBullet(circle) {
        var animation = circle.animate([{ property: "scale", from: 1, to: 5 }, { property: "opacity", from: 1, to: 0 }], 10000, am4core.ease.circleOut);
        animation.events.on("animationended", function(event){
          animateBullet(event.target.object);
        })
    }

    var colorSet = new am4core.ColorSet();
</script>
<script>
    $('.newsticker').newsTicker({
        max_rows: 5,
    });
</script>
 <script>
    $(document).ready(function(){
        $("#tabel_search").on("keyup", function() {
            var value = $(this).val().toLowerCase();

            $("#world_table tbody tr").filter(function() {
              $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
</script>

<!-- Subscription Modal -->
<div class="modal fade" id="subscriptionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Subscribe to Updates</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p class="mb-0">By submitting your email you accept the fact that we are going to process and store your email address to provide you with the service. We are not going to share your email with any third-party.</p>

                <br>

                <form class="form-inline" action="/subscribe/" method="post">{% csrf_token %}
                    <div class="mb-2 mr-sm-2 mb-sm-0 position-relative form-group"><label for="email" class="mr-sm-2">Email</label><input name="email" id="email" placeholder="something@idk.cool" type="email" class="form-control"></div>
                    <input type="hidden" id="country_name" name="country_name" value={{ my_country_data.country_name }}>
                    <button class="btn btn-primary">Submit</button>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


</body>
</html>
